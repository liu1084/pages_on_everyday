## X509认证失败 添加远程文件失败



Failed to execute goal com.spotify:dockerfile-maven-plugin:1.4.13:build (default) on project crass-dybbuk: Could not build image: ADD failed: Get "https://oss.cinaval.com:8896/apm/sw/agent/skywalking-agent.jar": x509: certificate signed by unknown authority -> [Help 1]



解决办法

-   将远程服务器的crt证书拿到，添加到服务器

```shell
# cp foo.crt cdfoo.crt
# update-ca-certificates                                                               Updating certificates in /etc/ssl/certs...
1 added, 0 removed; done.
Running hooks in /etc/ca-certificates/update.d...

Adding debian:foo.pem
done.
done.

```



-   在docker的认证目录添加远程服务器的证书

```shell
# mkdir -p /etc/docker/certs.d/foo.com:8896
# ls -lh
total 32K
-rw-r--r-- 1 root root 1.8K Jan 14 13:59 ca.crt
-rw-r--r-- 1 root root 2.1K Jan 14 13:59 oss.cinaval.com.crt
-rw-r--r-- 1 root root 1.7K Jan 14 13:59 oss.cinaval.com.key
```



-   重启docker

```shell
systemctl restart docker.service
```

